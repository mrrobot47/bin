#!/bin/bash

if [ "$GITHUB_REF" = "" ]; then
    echo "\$GITHUB_REF is not set"
    exit 1
fi

if [ "$#" -eq 0 ]; then
    echo "No arguments passed"
    exit 1
fi

for arg in "$@"; do
    gh_ref="refs/heads/${arg:-*}"
    if [ "$GITHUB_REF" = "$gh_ref" ]; then
        echo "$GITHUB_REF matches $gh_ref"
        exit 0
    fi
done

# If it reaches here then there have been no matches
echo "$GITHUB_REF does not match with any passed arguments"
exit 78
